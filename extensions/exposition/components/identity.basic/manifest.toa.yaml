namespace: identity
name: basic

entity:
  schema:
    username*: string
    password*: string
  initialized: true

operations:
  transit:
    concurrency: retry
    input:
      username: string
      password: string
  incept:
    forward: transit
    query: false
    input:
      username*: string
      password*: string
  create:
    input:
      id*: string
      credentials*: string
    output:
      id: string
  authenticate:
    input: string
    output:
      identity: object

configuration:
  rounds: 10
  pepper: ''
  username+: ^\S{1,16}$
  password+: ^\S{8,32}$

exposition:
  /:
    POST: incept
  /:id:
    auth:role: system:identity:basic
    auth:scheme: basic
    auth:id: id
    PATCH: transit
